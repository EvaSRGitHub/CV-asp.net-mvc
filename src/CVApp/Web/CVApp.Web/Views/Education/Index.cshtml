@model CVApp.ViewModels.Education.EducationCollectionViewModel

<div class="container">
    <div class="row">
        <div class="col-md-8 offset-2">
            <h2>Education</h2>
            <hr />
            <form method="post">
                <div asp-validation-summary="All" class="text-danger"></div>
                <div class="form-element">
                    <div class="form-group">
                        <label asp-for="EducationList[0].Institution">Institution Name</label>
                        <input asp-for="EducationList[0].Institution" class="form-control" placeholder="Name of educational institution">
                        <span asp-validation-for="EducationList[0].Institution" class="text-danger"></span>
                    </div>
                    <div class="form-row">
                        <div class="form-group col-md-4">
                            <label asp-for="EducationList[0].FromYear">Start year</label>
                            <input asp-for="EducationList[0].FromYear" type="date" class="form-control" placeholder="Year of enrolment">
                            <span asp-validation-for="EducationList[0].FromYear" class="text-danger"></span>
                        </div>
                        <div class="form-group col-md-4">
                            <label asp-for="EducationList[0].ToYear">End year</label>
                            <input asp-for="EducationList[0].ToYear" type="date" class="form-control" placeholder="Year of graduation">
                            <span asp-validation-for="EducationList[0].ToYear" class="text-danger"></span>
                        </div>
                        <div class="form-group col-md-4">
                            <label asp-for="EducationList[0].GPA">GPA</label>
                            <input asp-for="EducationList[0].GPA" class="form-control" placeholder="GPA 5.20">
                            <span asp-validation-for="EducationList[0].GPA" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label asp-for="EducationList[0].Diploma">Diploma Title</label>
                        <input asp-for="EducationList[0].Diploma" class="form-control" placeholder="Master of Law">
                        <span asp-validation-for="EducationList[0].Diploma" class="text-danger"></span>
                    </div>
                    <div class="form-row">
                        <div class="form-group col-md-6">
                            <label asp-for="EducationList[0].City">City</label>
                            <input asp-for="EducationList[0].City" class="form-control" placeholder="London">
                            <span asp-validation-for="EducationList[0].City" class="text-danger"></span>
                        </div>
                        <div class="form-group col-md-6">
                            <label asp-for="EducationList[0].Country">Country</label>
                            <input asp-for="EducationList[0].Country" class="form-control" placeholder="England">
                            <span asp-validation-for="EducationList[0].Country" class="text-danger"></span>
                        </div>
                    </div>
                    <hr />
                </div>

                <a href="javascript:void(0);" class="addFormElements" style="font-size:2em">+</a>

                <div class="educationContainer">

                </div>
                <div class="row">
                    <div class="col-auto mr-auto">
                        <button type="submit" class="btn btn-primary">Submit</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        $(document).ready(function () {
            let i = 1;

            $('.addFormElements').click(function () {

                let $formElement = $('<div class="form-element">');
                let value = "";

                let $institutionDiv = $('<div class="form-group"><label for="EducationList['+ i +'].Institution">Instituti on Name</label></div>');
                let $institutionInput = $('<input name="EducationList['+ i +'].Institution" class="form-control" placeholder="Name of educational institution">');
                let $institutionValidation = $('<span data-valmsg-for="EducationList['+ i +'].Institution" class="text-danger field-validation-valid" data-valmsg-replace="true"></span>');
                $institutionDiv.append($institutionInput);
                $institutionDiv.append($institutionValidation);
                $formElement.append($institutionDiv);

                let $periodAndGpaDiv = $('<div class= "form-row"></div>');
                let $fromYearLabel = $('<div class="form-group col-md-4"><label for="EducationList['+ i +'].FromYear">Start year</label></div>');
                let $fromYearInput = $('<input name="EducationList['+ i +'].FromYear" type = "date" class="form-control" placeholder = "Year of enrolment">');
                let $fromYearValidation = $('<span for="EducationList['+ i +'].FromYear" class="text-danger" ></span>');
                $fromYearLabel.append($fromYearInput);
                $fromYearLabel.append($fromYearValidation);
                $periodAndGpaDiv.append($fromYearLabel);

                let $toYearLabel = $('<div class="form-group col-md-4"> <label for="EducationList['+ i +'].ToYear">End year</label></div>');
                let $toYearInput = $('<input name="EducationList['+ i +'].ToYear" type = "date" class="form-control" placeholder = "Year of graduation">');
                let $toYearValidation = $('<span for="EducationList['+ i +'].ToYear" class="text-danger" ></span>');
                $toYearLabel.append($toYearInput);
                $toYearLabel.append($toYearValidation);
                $periodAndGpaDiv.append($toYearLabel);

                let $gpaLabel = $('<div class="form-group col-md-4"><label for="EducationList['+ i +'].GPA">GPA</label></div>');
                let $gpaInput = $('<input name="EducationList['+ i +'].GPA" class="form-control" placeholder = "GPA 5.20">');
                let $gpaValidation = $('<span for="EducationList['+ i +'].GPA" class="text-danger"></span >');
                $gpaLabel.append($gpaInput);
                $gpaLabel.append($gpaValidation);
                $periodAndGpaDiv.append($gpaLabel);
                $formElement.append($periodAndGpaDiv);

                let $diplomaDiv = $('<div class="form-group"><label for="EducationList['+ i +'].Diploma">Diploma Title</label></div>');
                let $diplomaInput = $('<input name="EducationList['+ i +'].Diploma" class="form-control" placeholder = "Master of Law">');
                let $diplomaValidation = $('<span for="EducationLis['+ i +'].Diploma" class="text-danger" ></span>');
                $diplomaDiv.append($diplomaInput);
                $diplomaDiv.append($diplomaValidation);
                $formElement.append($diplomaDiv);

                let $cityAndCountryDiv = $('<div class="form-row">');
                let $cityLabel = $('<div class="form-group col-md-6"><label for="EducationList['+ i +'].City">City</label></div > ');
                let $cityInput = $('<input name="EducationList['+ i +'].City" class="form-control" placeholder = "London">');
                let $cityValidation = $('<span for="EducationList[' + i + '].City" class="text-danger" ></span >');
                $cityLabel.append($cityInput);
                $cityLabel.append($cityValidation);
                $cityAndCountryDiv.append($cityLabel);

                let $countryLabel = $('<div class="form-group col-md-6"><label for="EducationList['+ i +'].Country">Country</label></div>');
                let $countyrInput = $('<input name="EducationList['+ i +'].Country" class="form-control" placeholder = "England">');
                let $countryValidation = $('<span for="EducationList['+ i +'].Country" class="text-danger"></span><hr />');
                $countryLabel.append($countyrInput);
                $countryLabel.append($countryValidation);
                $cityAndCountryDiv.append($countryLabel);
                $formElement.append($cityAndCountryDiv);

                //Seems to work without this. 
                //$institutionInput.val(value);
                //$fromYearInput.val(value);
                //$toYearInput.val(value);
                //$diplomaInput.val(value);
                //$cityInput.val(value);
                //$countyrInput.val(value);
                //$gpaInput.val(value);

                $('.educationContainer').append($formElement);
                 i++;
            });
           
        });

    </script>
    <partial name="_ValidationScriptsPartial" />
}